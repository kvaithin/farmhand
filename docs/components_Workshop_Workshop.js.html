<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>components/Workshop/Workshop.js - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <li class="nav-link nav-home-link"><a href="index.html">Home</a></li><li class="nav-heading">Classes</li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="module.html#.exports">exports</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module.html#.exports#.handleAddMoneyClick">handleAddMoneyClick</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module.html#.exports#.handleClickDialogViewButton">handleClickDialogViewButton</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module.html#.exports#.handleClickLoanPaydownButton">handleClickLoanPaydownButton</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module.html#.exports#.handleClickTakeOutLoanButton">handleClickTakeOutLoanButton</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module.html#.exports#.handleCombinePurchase">handleCombinePurchase</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module.html#.exports#.handleCowAutomaticHugChange">handleCowAutomaticHugChange</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module.html#.exports#.handleCowBreedChange">handleCowBreedChange</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module.html#.exports#.handleCowClick">handleCowClick</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module.html#.exports#.handleCowHugClick">handleCowHugClick</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module.html#.exports#.handleCowNameInputChange">handleCowNameInputChange</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module.html#.exports#.handleCowOfferClick">handleCowOfferClick</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module.html#.exports#.handleCowPenPurchase">handleCowPenPurchase</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module.html#.exports#.handleCowPurchaseClick">handleCowPurchaseClick</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module.html#.exports#.handleCowSelect">handleCowSelect</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module.html#.exports#.handleCowSellClick">handleCowSellClick</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module.html#.exports#.handleCowTradeClick">handleCowTradeClick</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module.html#.exports#.handleCowWithdrawClick">handleCowWithdrawClick</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module.html#.exports#.handleFarmNameUpdate">handleFarmNameUpdate</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module.html#.exports#.handleFieldActionRangeChange">handleFieldActionRangeChange</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module.html#.exports#.handleFieldModeSelect">handleFieldModeSelect</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module.html#.exports#.handleFieldPurchase">handleFieldPurchase</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module.html#.exports#.handleImportDataClick">handleImportDataClick</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module.html#.exports#.handleItemPurchaseClick">handleItemPurchaseClick</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module.html#.exports#.handleItemSelectClick">handleItemSelectClick</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module.html#.exports#.handleItemSellClick">handleItemSellClick</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module.html#.exports#.handleMakeRecipeClick">handleMakeRecipeClick</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module.html#.exports#.handleMenuToggle">handleMenuToggle</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module.html#.exports#.handlePlotClick">handlePlotClick</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module.html#.exports#.handleSmelterPurchase">handleSmelterPurchase</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module.html#.exports#.handleUpgradeTool">handleUpgradeTool</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module.html#.exports#.handleViewChange">handleViewChange</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module.html#.exports#.handleViewChangeButtonClick">handleViewChangeButtonClick</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="module.html#.exports#_factoryInstances">_factoryInstances</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="module.html#.exports#_instance">_instance</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="module.html#.exports#getFactoryForItemType">getFactoryForItemType</a></span></li><li class="nav-heading">Modules</li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="farmhand.module_items.html">items</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="farmhand.module_items.html#.chocolateMilk">chocolateMilk</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="farmhand.module_items.html#.cowFeed">cowFeed</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="farmhand.module_items.html#.fertilizer">fertilizer</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="farmhand.module_items.html#.huggingMachine">huggingMachine</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="farmhand.module_items.html#.milk1">milk1</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="farmhand.module_items.html#.milk2">milk2</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="farmhand.module_items.html#.milk3">milk3</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="farmhand.module_items.html#.rainbowFertilizer">rainbowFertilizer</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="farmhand.module_items.html#.rainbowMilk1">rainbowMilk1</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="farmhand.module_items.html#.rainbowMilk2">rainbowMilk2</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="farmhand.module_items.html#.rainbowMilk3">rainbowMilk3</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="farmhand.module_items.html#.scarecrow">scarecrow</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="farmhand.module_items.html#.sprinkler">sprinkler</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="farmhand.module_recipes.html">recipes</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="farmhand.module_recipes.html#.bread">bread</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="farmhand.module_recipes.html#.bronzeIngot">bronzeIngot</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="farmhand.module_recipes.html#.burger">burger</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="farmhand.module_recipes.html#.butter">butter</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="farmhand.module_recipes.html#.carrotSoup">carrotSoup</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="farmhand.module_recipes.html#.cheese">cheese</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="farmhand.module_recipes.html#.chocolate">chocolate</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="farmhand.module_recipes.html#.chocolateSoyMilk">chocolateSoyMilk</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="farmhand.module_recipes.html#.frenchOnionSoup">frenchOnionSoup</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="farmhand.module_recipes.html#.goldIngot">goldIngot</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="farmhand.module_recipes.html#.hotSauce">hotSauce</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="farmhand.module_recipes.html#.ironIngot">ironIngot</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="farmhand.module_recipes.html#.jackolantern">jackolantern</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="farmhand.module_recipes.html#.popcorn">popcorn</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="farmhand.module_recipes.html#.rainbowCheese">rainbowCheese</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="farmhand.module_recipes.html#.salsa">salsa</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="farmhand.module_recipes.html#.silverIngot">silverIngot</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="farmhand.module_recipes.html#.soyMilk">soyMilk</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="farmhand.module_recipes.html#.spaghetti">spaghetti</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="farmhand.module_recipes.html#.spicyCheese">spicyCheese</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="farmhand.module_recipes.html#.strawberryJam">strawberryJam</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="farmhand.module_recipes.html#.summerSalad">summerSalad</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="farmhand.module_recipes.html#.tofu">tofu</a></span></li><li class="nav-heading">Namespaces</li><li class="nav-heading"><span class="nav-item-type type-namespace">N</span><span class="nav-item-name"><a href="farmhand.html">farmhand</a></span></li><li class="nav-heading"><a href="global.html">Globals</a></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#applyPriceEvents">applyPriceEvents</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#asparagus">asparagus</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#asparagusSeed">asparagusSeed</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#bronzeOre">bronzeOre</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#carrot">carrot</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#carrotSeed">carrotSeed</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#categorizeShopInventory">categorizeShopInventory</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#coal">coal</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#corn">corn</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#cornSeed">cornSeed</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#createInitialState">createInitialState</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#farmhandStub">farmhandStub</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#generate">generate</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#generateFactoryInstance">generateFactoryInstance</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#generateResources">generateResources</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#generateValueAdjustments">generateValueAdjustments</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#getLearnedRecipeCategories">getLearnedRecipeCategories</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#getUpgradesAvailable">getUpgradesAvailable</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#goldOre">goldOre</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#handleCowTradeRequest">handleCowTradeRequest</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#handleCowTradeRequestAccept">handleCowTradeRequestAccept</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#handleCowTradeRequestReject">handleCowTradeRequestReject</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#handlePeerMetadataRequest">handlePeerMetadataRequest</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#instance">instance</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#ironOre">ironOre</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#jalapeno">jalapeno</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#jalapenoSeed">jalapenoSeed</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#messagePeers">messagePeers</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#onion">onion</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#onionSeed">onionSeed</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#pea">pea</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#peaSeed">peaSeed</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#potato">potato</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#potatoSeed">potatoSeed</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#pumpkin">pumpkin</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#pumpkinSeed">pumpkinSeed</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#silverOre">silverOre</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#soybean">soybean</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#soybeanSeed">soybeanSeed</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#spinach">spinach</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#spinachSeed">spinachSeed</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#stone">stone</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#strawberry">strawberry</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#strawberrySeed">strawberrySeed</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#testShoveledPlot">testShoveledPlot</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#tomato">tomato</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#tomatoSeed">tomatoSeed</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#tradeForPeerCow">tradeForPeerCow</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#upgrades">upgrades</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#watermelon">watermelon</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#watermelonSeed">watermelonSeed</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#wheat">wheat</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#wheatSeed">wheatSeed</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#wrapSendPeerMetadata">wrapSendPeerMetadata</a></span></li>
</nav>

<div id="main">
    
    <h1 class="page-title">components/Workshop/Workshop.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import React, { useState } from 'react'
import { object } from 'prop-types'
import Card from '@material-ui/core/Card'
import CardContent from '@material-ui/core/CardContent'
import Divider from '@material-ui/core/Divider'
import ReactMarkdown from 'react-markdown'
import AppBar from '@material-ui/core/AppBar'
import Tab from '@material-ui/core/Tab'
import Tabs from '@material-ui/core/Tabs'

import { features } from '../../config'
import { recipeType } from '../../enums'

import { recipeCategories, recipesMap } from '../../data/maps'
import toolUpgrades from '../../data/upgrades'

import Recipe from '../Recipe'
import UpgradePurchase from '../UpgradePurchase'

import FarmhandContext from '../../Farmhand.context'

import { TabPanel, a11yProps } from './TabPanel'

import './Workshop.sass'

/**
 * @param {Array.&lt;Object.&lt;string, true>>} learnedRecipes
 * @returns {{ learnedKitchenRecipes: Array.&lt;farmhand.recipe>, learnedForgeRecipes: Array.&lt;farmhand.recipe>}}
 */
const getLearnedRecipeCategories = learnedRecipes => {
  const learnedKitchenRecipes = []
  const learnedForgeRecipes = []

  for (const learnedRecipeId of Object.keys(learnedRecipes)) {
    const learnedRecipe = recipesMap[learnedRecipeId]

    switch (learnedRecipe.recipeType) {
      case recipeType.KITCHEN:
        learnedKitchenRecipes.push(learnedRecipe)
        break
      case recipeType.FORGE:
        learnedForgeRecipes.push(learnedRecipe)
        break
      default:
        throw new Error(`Received invalid recipe ID: ${learnedRecipeId}`)
    }
  }

  return { learnedKitchenRecipes, learnedForgeRecipes }
}

/**
 * Get available upgrades based on current tool levels and unlocked recipes
 * @param {object} toolLevels - the current level of each tool
 * @param {array} learnedRecipes - list of learned recipes from farmhand state
 * @returns {array} a list of all applicable upgrades
 */
const getUpgradesAvailable = (toolLevels, learnedRecipes) => {
  let upgradesAvailable = []
  const learnedRecipeIds = learnedRecipes.map(r => r.id)

  for (let type of Object.keys(toolUpgrades)) {
    let upgrade = toolUpgrades[type][toolLevels[type]]

    if (upgrade &amp;&amp; !upgrade.isMaxLevel &amp;&amp; upgrade.nextLevel) {
      const nextLevelUpgrade = toolUpgrades[type][upgrade.nextLevel]
      let allIngredientsUnlocked = true

      for (let ingredient of Object.keys(nextLevelUpgrade.ingredients)) {
        allIngredientsUnlocked =
          allIngredientsUnlocked &amp;&amp;
          !!(!recipesMap[ingredient] || learnedRecipeIds.includes(ingredient))
      }

      if (allIngredientsUnlocked) {
        upgradesAvailable.push(nextLevelUpgrade)
      }
    }
  }

  return upgradesAvailable
}

const Workshop = ({ learnedRecipes, purchasedSmelter, toolLevels }) => {
  const [currentTab, setCurrentTab] = useState(0)

  const {
    learnedKitchenRecipes,
    learnedForgeRecipes,
  } = getLearnedRecipeCategories(learnedRecipes)

  const upgradesAvailable = getUpgradesAvailable(
    toolLevels,
    learnedForgeRecipes
  )

  const showForge = features.MINING &amp;&amp; purchasedSmelter

  return (
    &lt;div className="Workshop">
      &lt;AppBar position="static" color="primary">
        &lt;Tabs
          value={currentTab}
          onChange={(e, newTab) => setCurrentTab(newTab)}
          aria-label="Workshop tabs"
        >
          &lt;Tab {...{ label: 'Kitchen', ...a11yProps(0) }} />
          {showForge ? &lt;Tab {...{ label: 'Forge', ...a11yProps(1) }} /> : null}
        &lt;/Tabs>
      &lt;/AppBar>
      &lt;TabPanel value={currentTab} index={0}>
        &lt;h3>
          Learned Recipes ({learnedKitchenRecipes.length} /{' '}
          {Object.keys(recipeCategories[recipeType.KITCHEN]).length})
        &lt;/h3>
        &lt;ul className="card-list">
          {learnedKitchenRecipes.map(({ id: recipeId }) => (
            &lt;li key={recipeId}>
              &lt;Recipe
                {...{
                  recipe: recipeCategories[recipeType.KITCHEN][recipeId],
                }}
              />
            &lt;/li>
          ))}
        &lt;/ul>
        &lt;Divider />
        &lt;ul className="card-list">
          {/*
          This really isn't a list, but it makes it easy to keep the UI
          consistent.
        */}
          &lt;li>
            &lt;Card>
              &lt;CardContent>
                &lt;ReactMarkdown
                  {...{
                    linkTarget: '_blank',
                    className: 'markdown',
                    source: `Kitchen recipes are learned by selling crops and animal products. Sell as much as you can of a wide variety of items!`,
                  }}
                />
              &lt;/CardContent>
            &lt;/Card>
          &lt;/li>
        &lt;/ul>
      &lt;/TabPanel>
      {showForge ? (
        &lt;TabPanel value={currentTab} index={1}>
          &lt;h3>
            Learned Recipes ({learnedForgeRecipes.length} /{' '}
            {Object.keys(recipeCategories[recipeType.FORGE]).length})
          &lt;/h3>
          &lt;ul className="card-list">
            {learnedForgeRecipes.map(({ id: recipeId }) => (
              &lt;li key={recipeId}>
                &lt;Recipe
                  {...{
                    recipe: recipeCategories[recipeType.FORGE][recipeId],
                  }}
                />
              &lt;/li>
            ))}
          &lt;/ul>
          {upgradesAvailable.length ? (
            &lt;>
              &lt;Divider />
              &lt;ul className="card-list">
                &lt;li>
                  &lt;h4>Tool Upgrades&lt;/h4>
                &lt;/li>
                {upgradesAvailable.map(upgrade => (
                  &lt;li key={upgrade.id}>
                    &lt;UpgradePurchase upgrade={upgrade} />
                  &lt;/li>
                ))}
              &lt;/ul>
            &lt;/>
          ) : null}
          &lt;Divider />
          &lt;ul className="card-list">
            &lt;li>
              &lt;Card>
                &lt;CardContent>
                  &lt;ReactMarkdown
                    {...{
                      linkTarget: '_blank',
                      className: 'markdown',
                      source: `Forge Recipes are learned by selling resources mined from the field.`,
                    }}
                  />
                &lt;/CardContent>
              &lt;/Card>
            &lt;/li>
          &lt;/ul>
        &lt;/TabPanel>
      ) : null}
    &lt;/div>
  )
}

Workshop.propTypes = {
  learnedRecipes: object.isRequired,
}

export default function Consumer(props) {
  return (
    &lt;FarmhandContext.Consumer>
      {({ gameState, handlers }) => (
        &lt;Workshop {...{ ...gameState, ...handlers, ...props }} />
      )}
    &lt;/FarmhandContext.Consumer>
  )
}
</code></pre>
        </article>
    </section>




</div>

<br class="clear">

<footer>
    Generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.6</a> on Tue May 10 2022 14:02:51 GMT+0000 (Coordinated Universal Time) using the Minami theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>
